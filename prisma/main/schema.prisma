generator client {
  provider = "prisma-client-js"
}

generator docs {
  provider = "node node_modules/prisma-docs-generator"
  output   = "../../docs/main"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

/**
 * –ú–æ–¥–µ–ª—å Tenant —Ö—Ä–∞–Ω–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–ª–∏–µ–Ω—Ç–∞—Ö/–∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–∞—Ö —Å–∏—Å—Ç–µ–º—ã (–º—É–ª—å—Ç–∏–∞—Ä–µ–Ω–¥–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞).
 * –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Ç–¥–µ–ª—å–Ω—ã–º–∏ –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –¥–æ—Å—Ç—É–ø–∞–º–∏ –∫–∞–∂–¥–æ–≥–æ –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–∞.
 */
model Tenant {
  id                   String                 @id @default(uuid()) /* –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–∞, –ø—Ä–∏–º–µ—Ä: "a1b2c3d4-5e6f-7a8b-9c0d-1e2f3a4b5c6d" */
  name                 String                 @unique /* –ù–∞–∑–≤–∞–Ω–∏–µ –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–∞, –ø—Ä–∏–º–µ—Ä: "Acme Corp" */
  ownerId              String?                @map("owner_id") /* ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è-–≤–ª–∞–¥–µ–ª—å—Ü–∞ –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–∞ */
  apiKey               String                 @unique @map("api_key") /* API –∫–ª—é—á –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏, –ø—Ä–∏–º–µ—Ä: "12345-abcdef-67890" */
  dbName               String                 @map("db_name") /* –ù–∞–∑–≤–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–∞, –ø—Ä–∏–º–µ—Ä: "tenant_acme_db" */
  dbHost               String                 @map("db_host") /* –•–æ—Å—Ç –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, –ø—Ä–∏–º–µ—Ä: "localhost" –∏–ª–∏ "db.example.com" */
  dbPort               Int                    @map("db_port") /* –ü–æ—Ä—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö, –ø—Ä–∏–º–µ—Ä: 5432 */
  dbUser               String                 @map("db_user") /* –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, –ø—Ä–∏–º–µ—Ä: "tenant_user" */
  dbPassword           String                 @map("db_password") /* –ü–∞—Ä–æ–ª—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, –ø—Ä–∏–º–µ—Ä: "securepassword" */
  hostname             String?                @unique
  status               TenantStatus           @default(ACTIVE) /* –°—Ç–∞—Ç—É—Å –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–∞: ACTIVE, INACTIVE */
  owner                User?                  @relation(fields: [ownerId], references: [id], onDelete: SetNull) /* –°–≤—è–∑—å —Å –≤–ª–∞–¥–µ–ª—å—Ü–µ–º –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–∞ */
  createdAt            DateTime               @default(now()) @map("created_at") /* –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–∞ */
  updatedAt            DateTime               @updatedAt @map("updated_at") /* –î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–∞ */
  auditTenantCreations AuditTenantCreations[] /* –°–≤—è–∑—å —Å –∞—É–¥–∏—Ç–æ–º —Å–æ–∑–¥–∞–Ω–∏—è –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–æ–≤ */

  @@map("tenants") /* –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö */
}

/**
 * –ú–æ–¥–µ–ª—å User —Ö—Ä–∞–Ω–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö —Å–∏—Å—Ç–µ–º—ã.
 * –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏, —Å–≤—è–∑–∏ —Å –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–∞–º–∏ –∏ –∫–æ–Ω—Ç—Ä–æ–ª—è –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞.
 */
model User {
  id             String             @id @default(uuid()) /* –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –ø—Ä–∏–º–µ—Ä: "a1b2c3d4-5e6f-7a8b-9c0d-1e2f3a4b5c6d" */
  firstName      String             @map("first_name") /* –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –ø—Ä–∏–º–µ—Ä: "Muhammad" */
  lastName       String             @map("last_name") /* –§–∞–º–∏–ª–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –ø—Ä–∏–º–µ—Ä: "Abdurahimov" */
  phone          String             @unique /* –ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –ø—Ä–∏–º–µ—Ä: "+998901234567" */
  email          String?            @unique /* –≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ—á—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –ø—Ä–∏–º–µ—Ä: "user@example.com" */
  password       String /* –•—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è */
  role           UserRole           @default(OWNER) /* –†–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å–∏—Å—Ç–µ–º–µ, –ø—Ä–∏–º–µ—Ä: OWNER, ADMIN, MANAGER */
  updatedAt      DateTime           @updatedAt @map("updated_at") /* –î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è */
  createdAt      DateTime           @default(now()) @map("created_at") /* –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è */
  tenants        Tenant[] /* –°–≤—è–∑—å —Å –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–º–∏ —É–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å */
  refresh_tokens UserRefreshToken[] // üëà —Å–≤—è–∑—å —Å —Ç–∞–±–ª–∏—Ü–µ–π refresh-—Ç–æ–∫–µ–Ω–æ–≤

  @@map("users") /* –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö */
}

/**
 * –ú–æ–¥–µ–ª—å UserRefreshToken —Ö—Ä–∞–Ω–∏—Ç refresh —Ç–æ–∫–µ–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è –º–µ—Ö–∞–Ω–∏–∑–º–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞ (JWT).
 * –ö–∞–∂–¥—ã–π —Ç–æ–∫–µ–Ω —Å–≤—è–∑–∞–Ω —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –∏ –∏–º–µ–µ—Ç —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è.
 */
model UserRefreshToken {
  id        String   @id @default(uuid()) /* –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ç–æ–∫–µ–Ω–∞, –ø—Ä–∏–º–µ—Ä: "b7d8a9f0-1c2d-3e4f-5a6b-7c8d9e0f1a2b" */
  tokenHash String   @map("token_hash") /* –•—ç—à refresh —Ç–æ–∫–µ–Ω–∞, –ø—Ä–∏–º–µ—Ä: "3f5e6a8b..." */
  userId    String   @map("user_id") /* ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∫–æ—Ç–æ—Ä–æ–º—É –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç —Ç–æ–∫–µ–Ω */
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade) /* –°–≤—è–∑—å —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º */
  createdAt DateTime @default(now()) @map("created_at") /* –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–æ–∫–µ–Ω–∞ */
  expiresAt DateTime @map("expires_at") /* –í—Ä–µ–º—è –∏—Å—Ç–µ—á–µ–Ω–∏—è —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è —Ç–æ–∫–µ–Ω–∞, –ø—Ä–∏–º–µ—Ä: "2025-12-01T10:00:00Z" */

  @@map("user_refresh_tokens") /* –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö */
}

/**
 * –ú–æ–¥–µ–ª—å AuditTenantCreations —Ö—Ä–∞–Ω–∏—Ç –∏—Å—Ç–æ—Ä–∏—é —Å–æ–∑–¥–∞–Ω–∏—è –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–æ–≤ (tenants).
 * –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∞—É–¥–∏—Ç–∞ –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Ç–æ–≥–æ, –∫—Ç–æ –∏ –∫–æ–≥–¥–∞ —Å–æ–∑–¥–∞–≤–∞–ª –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–æ–≤ –≤ —Å–∏—Å—Ç–µ–º–µ.
 */
model AuditTenantCreations {
  id        String   @id @default(uuid()) /* –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∑–∞–ø–∏—Å–∏ –∞—É–¥–∏—Ç–∞, –ø—Ä–∏–º–µ—Ä: "a1b2c3d4-5e6f-7a8b-9c0d-1e2f3a4b5c6d" */
  tenantId  String?  @map("tenant_id") /* ID –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–∞, –¥–ª—è –∫–æ—Ç–æ—Ä–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∞ –∑–∞–ø–∏—Å—å */
  createdBy String   @map("created_by") /* ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–∑–¥–∞–ª –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–∞ */
  action    String /* –î–µ–π—Å—Ç–≤–∏–µ, –ø—Ä–∏–º–µ—Ä: "CREATE" */
  tenant    Tenant?  @relation(fields: [tenantId], references: [id], onDelete: SetNull) /* –°–≤—è–∑—å —Å –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–æ–º */
  createdAt DateTime @default(now()) @map("created_at") /* –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–∏ –∞—É–¥–∏—Ç–∞ */
  metadata  Json? /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ —Å–æ–∑–¥–∞–Ω–∏–∏, –ø—Ä–∏–º–µ—Ä: {"note": "–¢–µ—Å—Ç–æ–≤—ã–π –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä"} */

  @@map("audit_tenant_creations") /* –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö */
}

// enum for user roles
enum UserRole {
  PLATFORM_OWNER
  ADMIN
  OWNER
}

enum TenantStatus {
  ACTIVE
  INACTIVE
  SUSPENDED
  DELETED
}
